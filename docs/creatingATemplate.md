# The basics
It's really easy!

Let's look at a real example:

    # Screen config generated by mass
    <~ macro screenTemplate:
    retrieveResults Screen,sourcelist
    
    ~~screen -t %hostName% ssh -v %IP%
    
    ~>

Unike a macro, a template does not need a comment on the first line, so that comment is actually going to form part of the output.

So the basic idea is that we execute something between `<~` and `~~`; the *execution block*, and the result array that comes back will be iterated through, and the part of our insertion between the `~~` and `~>`; the *formatting block* formats how each item in the result array will be formatted.


# The details

## The execution block

    <~ macro screenTemplate:
    retrieveResults Screen,sourcelist
    ~~

The first line is actually executing the macro feature which "*Define and run a macro. --macro=macroName:"command1=blah\ncommand2=wheee"*". Ie we create a macro named screenTemplate and immediately run it. In this case the macro contains a single command which gets the results of the screen.macro that invoked the template. 

## The formatting block

Now the second part:
    ~~screen -t %hostName% ssh -v %IP%
    
    ~>

Note that the formatting is currently a bit screwey! This is to do with new-line feeds. I've done it this way so that we don't _have_ to separate results by new lines.... Because that won't always be correct. :)

TODO unscrewify formatting block of templates.

Let's pretend the results from the section above look like this:

    0: 
      filename: local.hosts.json
      categoryName: local
      hostName: localhost
      internalIP: 127.0.0.1
      externalIP: 
      internalFQDN: localhost
      externalFQDN:
    1: 
      filename: local.hosts.json
      categoryName: local
      hostName: localhost2
      internalIP: 127.0.0.2
      externalIP: 
      internalFQDN: localhost2
      externalFQDN:

Using the formatting block described, we'll get this:

    screen -t localhost ssh -v 127.0.0.1
    screen -t localhost2 ssh -v 127.0.0.2
    

## Putting it all together

In the final output we're going to get a little more. Remember that comment in the beginning?

    # Screen config generated by mass
    
    screen -t localhost ssh -v 127.0.0.1
    screen -t localhost2 ssh -v 127.0.0.2
    

And that's all there is to it! :)

# Misc

You can have as many insertion blocks as you want. The only limitation right now is that you need to have a unique name for every insertion. This entry creates a macro, so the macro name must be unique.

TODO Create the ability to have one off macros that will not have namespace issues. Potentially using a dispose feature that is automatically invoked by the template. It should not have to be invoked by the person writing the template as that will lead to bugs.
